#!/bin/bash

set -e

. ~/bin/lib/util.sh

if ! is_tmux_running && ! tmux has-session >/dev/null 2>&1; then
  tmux new-session
else
  selected=$(tmux ls -F '#{session_name} (#{t:session_activity}) #{session_windows} windows' | fzf-tmux | awk '{ print $1 }')
  if [ -z "$selected" ]; then
    exit 1
  fi
  tmux attach-session -t "$selected"
fi
